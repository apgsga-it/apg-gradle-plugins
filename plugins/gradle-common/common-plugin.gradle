buildscript {
	repositories {
		gradlePluginPortal()
	}
	dependencies {
		classpath 'nu.studer:gradle-credentials-plugin:2.1'
	}
}

apply plugin: 'groovy'
apply plugin: 'java-gradle-plugin'
apply plugin: 'maven-publish'
apply plugin: 'eclipse'
apply plugin: nu.studer.gradle.credentials.CredentialsPlugin

group = 'com.apgsga.gradle'
version = '1.1-SNAPSHOT'


def devUser = project.credentials.devUser
def devPw = project.credentials.devPw

repositories {
	mavenLocal()
	mavenCentral()
	jcenter()

	maven {
		url "${mavenRepoBaseUrl}/${mavenRepoName}"
		credentials {
			username devUser
			password devPw
		}
	}

}

publishing {
	def repoName = version.endsWith("SNAPSHOT") ? gradlePluginSnapshotsRepo : gradlePluginReleasesRepo

	publications {
		maven(MavenPublication) {
		}
	}

	repositories {
		maven {
			name ='apgGradlePluginRepo'
			url  "${mavenRepoBaseUrl}/${repoName}"
			credentials {
				username = devUser
				password = devPw
			}
		}
	}
}


eclipse {
	classpath {
		downloadJavadoc = true
		downloadSources = true
	}
}
 